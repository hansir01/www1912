//图片加载
echo.init({
    offset: 200
});

$(function () {
    //热门专业列表图片加载
    $(".sdxh_dh_zy li,.sdxh_rig li").hover(function () {
        echo.render();
    });

    // 咨询人数
    if (document.getElementById("sdxh_btmdh_zxrs") != null) {
        setInterval(function () {
            document.getElementById("sdxh_btmdh_zxrs").innerText = parseInt(Math.random() * 10 + 20)
        }, 5000);
    }

    //延迟加载临时图像
    $("img[data-echo]").each(function () {
        if ($(this).attr("src") == undefined)
            $(this).attr("src", "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");
    })

    //中间弹窗
    var sdxh_talk_window = $(".sdxh_talk_window");
    if (sdxh_talk_window.length > 0) {
        function llzx_show() {
            sdxh_talk_window.show();
            var sdxh_talk_window_con = sdxh_talk_window.children("div");
            var sdxh_talk_window_con_show = sdxh_talk_window_con.eq(sdxh_talk_window_con_index);
            if (sdxh_talk_window_con_show.length == 0) {
                sdxh_talk_window_con_index = 0;
                sdxh_talk_window_con_show = sdxh_talk_window_con.eq(sdxh_talk_window_con_index);
            } else {
                sdxh_talk_window_con_index = sdxh_talk_window_con_index + 1;
            }
            sdxh_talk_window_con_show.show();
            sdxh_talk_window_con_show.siblings().hide();
        }

        var sdxh_talk_window_con_index = 0;
        $(".sdxh_talk_window_clo").click(function () {
            sdxh_talk_window.hide();
            setTimeout(llzx_show, 30000)
        });
        $(".sdxh_talk_window_clo:eq(0)").click();
        $(".sdxh_talk_window_con2 label").click(function () {
            $(this).addClass("active");
            $(this).siblings().removeClass("active");
        });
    }
    
    // 咨询人数
    var sdxh_qq = $(".sdxh_qq");
    if (sdxh_qq.length > 0) {

        sdxh_qq.find("span").attr("onclick","");
        sdxh_qq.find("span").click(function(){
            sdxh_qq.hide();
            setTimeout(function(){sdxh_qq.show();}, 15000);
        });
    }

    sdxh_talk_window.find(".sdxh_talk_window_con1 .ri h3 span").html("抢先预报");
    sdxh_talk_window.find(".sdxh_talk_window_con2 .ri h3").html("春季预报<br><span>火热进行中</span>");
    sdxh_talk_window.find(".sdxh_talk_window_con2 .ri p").html("预报名省学费拿豪礼");
    sdxh_talk_window.find(".sdxh_talk_window_con2 .ri .llzx").html("抢占先机赢未来");
    sdxh_qq.find("h3").html("2020年春季预报名开始啦");
    sdxh_qq.find("p").html("山东新华2020年春季预报火爆开启，2020年我院专业、设备、师资全面升级，预报可享原学费，还有助学大礼包，名额有限预报从速！"/*<br>点击查看详情>>*/);

});


// 返回顶部
function gotoTop(acceleration, stime) {
    acceleration = acceleration || 0.1;
    stime = stime || 10;
    var x1 = 0;
    var y1 = 0;
    var x2 = 0;
    var y2 = 0;
    var x3 = 0;
    var y3 = 0;
    if (document.documentElement) {
        x1 = document.documentElement.scrollLeft || 0;
        y1 = document.documentElement.scrollTop || 0
    }
    if (document.body) {
        x2 = document.body.scrollLeft || 0;
        y2 = document.body.scrollTop || 0
    }
    var x3 = window.scrollX || 0;
    var y3 = window.scrollY || 0;
    var x = Math.max(x1, Math.max(x2, x3));
    var y = Math.max(y1, Math.max(y2, y3));
    var speeding = 1 + acceleration;
    window.scrollTo(Math.floor(x / speeding), Math.floor(y / speeding));
    if (x > 0 || y > 0) {
        var run = "gotoTop(" + acceleration + ", " + stime + ")";
        window.setTimeout(run, stime)
    }
};